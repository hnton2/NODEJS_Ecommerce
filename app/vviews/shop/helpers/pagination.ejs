<%
    paginationHelper = (paginationObj, linkPrefix, params) => {
        let totalItems          = paginationObj.totalItems;
        let totalItemsPerPage   = paginationObj.totalItemsPerPage;
        let totalPages          = Math.ceil(totalItems/totalItemsPerPage);
        let currentPage         = paginationObj.currentPage;
        let pageRanges          = paginationObj.pageRanges;
        let xhtmlPagination     = '';
        let to                  = totalItemsPerPage * currentPage;
        let from                = to - totalItemsPerPage + 1;
        if(to > totalItems) to  = totalItems;
        if(totalPages > 1) {
            let xhtmlStart = '<li class="disabled"><a href=""><i class="fa fa-angle-double-left"></i></a></li>';
            let xhtmlPrevious = '<li class="disabled"><a href=""><i class="fa fa-angle-left"></i></a></li>';
            let xhtmlPages = '';
            let xhtmlNext = '<li class="disabled"><a href="#"><i class="fa fa-angle-right"></i></a></li>' ;
            let xhtmlEnd = '<li class="disabled"><a href="#"><i class="fa fa-angle-double-right"></i></a></li>';
            let link       = linkPrefix;
            if(params.category !== 'all') link += '?slug=' + params.category;
            if(params.brand !== 'all') link += '?brand=' + params.brand;
            if(params.keyword !== '') link += '?search=' + params.keyword;
            if(params.color !== 'all') link += '?color=' + params.color;
            if(params.size !== 'all') link += '?size=' + params.size;
            if(params.price !== 'all') link += '?filter-price=' + params.price;
            if(params.sortField !== 'name' && params.sortType !== 'asc') link += '?sort=' + params.sortField + '-' + params.sortType;
            link += '?page=';

            if(currentPage > 1){
                xhtmlStart = `<li><a href="${link}1"><i class="fa fa-angle-double-left"></i></a></li>`;
                xhtmlPrevious = `<li><a href="${link}${currentPage-1}"><i class="fa fa-angle-left"></i></a></li>`;
            }
    
            if(currentPage < totalPages){
                xhtmlEnd = `<li><a href="${link}${totalPages}"><i class="fa fa-angle-double-right"></i></a></li>`;
                xhtmlNext = `<li><a href="${link}${currentPage+1}"><i class="fa fa-angle-right"></i></a></li>`;
            }
            
            let middle = Math.ceil(pageRanges/2);
            let min = currentPage - middle + 1;

            let max = min + pageRanges - 1;
            if(min <= 1){
                min = 1;
                max = pageRanges;
            }

            if(max >= totalPages){  // 3
                max = totalPages;
                min = ((max - pageRanges + 1) >= 1) ? (max - pageRanges + 1) : 1; 
            }

            for(let i = min; i <= max; i++){
                if(i == currentPage) {
                    xhtmlPages += `<li class="active"><a>${i}</a></li>`;
                } else {
                    xhtmlPages += `<li><a href="${link}${i}">${i}</a></li>`;
                }
            }

            xhtmlPagination = '<ul class="pagination">' + xhtmlStart + xhtmlPrevious + xhtmlPages + xhtmlNext + xhtmlEnd + '</ul>';
        }

        return `<div class="ps-pagination">
                    ${xhtmlPagination}
                </div>`;
    }
%>

