<% include ./../../helpers/get-address %>
<% include ./../../helpers/selectBox %>

<!DOCTYPE html>
<html lang="en">
<head>
  <% include ./../../elements/head.ejs %>
</head>
<body>
<div class="wrapper">
  <!-- Main content -->
  <section class="invoice">
    <!-- title row -->
    <div class="row">
      <div class="col-12">
        <h2 class="page-header">
          <i class="fas fa-globe"></i> Fashion Shop, Inc.
          <small class="float-right">Date: <%= moment(item.time).format(systemConfig.format_date) %></small>
        </h2>
      </div>
      <!-- /.col -->
    </div>
    <!-- info row -->
    <div class="row invoice-info">
      <div class="col-sm-4 invoice-col">
        From
        <address>
				  <strong>Admin - Fashion Shop, Inc.</strong><br>
				  <%= infoConfig.address.split(',')[0] %>, <br>
				  <%= infoConfig.address.split(',')[1] %>, <%= infoConfig.address.split(',')[2] %> <br>
				  Phone: <%= infoConfig.hotline %> <br>
				  Email: <%= infoConfig.email %>
				</address>
      </div>
      <!-- /.col -->
      <div class="col-sm-4 invoice-col">
        To
        <address>
				  <strong><%= item.user.name%></strong><br>
				  <%= addressHelper(item.user.address)[0] %><br>
				  <%= addressHelper(item.user.address)[1] %><br>
				  Phone: <%= item.user.phone %><br>
				  Email: <%= item.user.email %>
				</address>
      </div>
      <!-- /.col -->
      <div class="col-sm-4 invoice-col">
        <b>Invoice #<%= item.code %></b><br>
				<br>
				<b>Order ID:</b> <%= item.id %><br>
				<b>Payment Due:</b> <%= moment(item.time).format(systemConfig.format_date_2) %><br>
			  </div>
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->

    <!-- Table row -->
    <div class="row">
      <div class="col-12 table-responsive">
        <table class="table table-striped">
          <thead>
          <tr>
            <th>ID</th>
            <th>Product</th>
            <th>Type</th>
            <th>Quantity</th>
            <th>Price</th>
          </tr>
          </thead>
          <tbody>
            <% item.product.forEach( (data) => { %>
              <tr>
                <td><%= data.id %></td>
                <td>
                  <%= data.name %>
                  <% if('size' in data && data.size != null) { %>  
                    - Size: <%= data.size %>
                  <% } %>
                </td>
                <td><%= data.product_type %></td>
                <td><%= data.quantity %></td>
                <td>$<%= data.price %></td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->

    <div class="row">
      <!-- accepted payments column -->
      <div class="col-6">
        <p class="lead">Payment Method: <%= item.payment.charAt(0).toUpperCase() + item.payment.slice(1) %></p>
					<% if(item.promo_code.name !== undefined) { %>
						<p class="lead">Promo code: <%= item.promo_code.name %></p>
					<% } %>
					<p class="lead">Message:</p>
					<p class="text-muted well well-sm shadow-none" style="margin-top: 10px;">
						<%= item.user.message %>
					</p>
      </div>
      <!-- /.col -->
      <div class="col-6">
        <p class="lead">Amount Due <%= moment(item.time).format(systemConfig.format_date) %></p>

        <div class="table-responsive">
          <table class="table">
            <tbody>
              <tr>
                <th>Shipping:</th>
                <td>$<%= item.shipping_fee %></td>
              </tr>
              <% if(item.promo_code.name !== undefined) { %>
                <tr>
                  <th>Promotional value:</th>
                  <td>$<%= item.promo_code.value %></td>
                </tr>
              <% } %>
              <tr>
                <th>Total:</th>
                <td>$<%= item.total %></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->
  </section>
  <!-- /.content -->
</div>
<!-- ./wrapper -->
<!-- Page specific script -->
<script>
  window.addEventListener("load", window.print());
</script>
</body>
</html>
